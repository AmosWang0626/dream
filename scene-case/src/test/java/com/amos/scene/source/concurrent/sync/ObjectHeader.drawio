<mxfile host="drawio-plugin" modified="2021-04-17T10:39:16.007Z" agent="5.0 (Windows NT 6.2; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.141 Safari/537.36" version="13.7.9" etag="LJG3v-0-nEKyrAGwzvG1" type="embed"><diagram id="cdHhv8lz60HGGjiJquJf" name="Page-1"><mxGraphModel dx="913" dy="323" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0"><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="14" value="" style="rounded=1;whiteSpace=wrap;html=1;sketch=0;fillColor=#09555B;strokeColor=#BAC8D3;fontColor=#EEEEEE;" vertex="1" parent="1"><mxGeometry x="46" y="56" width="210" height="270" as="geometry"/></mxCell><mxCell id="15" value="Java Object" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;sketch=0;fontColor=#EEEEEE;" vertex="1" parent="1"><mxGeometry x="98.5" y="66" width="105" height="20" as="geometry"/></mxCell><mxCell id="16" value="Mark Word" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;strokeColor=#BAC8D3;fillColor=#09555B;fontColor=#EEEEEE;" vertex="1" parent="1"><mxGeometry x="83.5" y="106" width="135" height="50" as="geometry"/></mxCell><mxCell id="17" value="Class Point 类型指针" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;strokeColor=#BAC8D3;fillColor=#09555B;fontColor=#EEEEEE;" vertex="1" parent="1"><mxGeometry x="83.5" y="156" width="135" height="50" as="geometry"/></mxCell><mxCell id="18" value="实例数据" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;strokeColor=#BAC8D3;fillColor=#09555B;fontColor=#EEEEEE;" vertex="1" parent="1"><mxGeometry x="83.5" y="206" width="135" height="50" as="geometry"/></mxCell><mxCell id="19" value="对齐填充" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;strokeColor=#BAC8D3;fillColor=#09555B;fontColor=#EEEEEE;" vertex="1" parent="1"><mxGeometry x="83.5" y="256" width="135" height="50" as="geometry"/></mxCell><mxCell id="21" value="" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.annotation_1;align=left;pointerEvents=1;rounded=0;sketch=0;fillColor=#09555B;fontColor=#EEEEEE;strokeColor=#BAC8D3;" vertex="1" parent="1"><mxGeometry x="76.5" y="126" width="7" height="70" as="geometry"/></mxCell><mxCell id="22" value="对象头" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;sketch=0;fontColor=#EEEEEE;" vertex="1" parent="1"><mxGeometry x="56.5" y="131" width="20" height="60" as="geometry"/></mxCell><mxCell id="23" value="" style="rounded=1;whiteSpace=wrap;html=1;sketch=0;fillColor=#09555B;strokeColor=#BAC8D3;fontColor=#EEEEEE;" vertex="1" parent="1"><mxGeometry x="286" y="56" width="210" height="270" as="geometry"/></mxCell><mxCell id="24" value="Array Object" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;sketch=0;fontColor=#EEEEEE;" vertex="1" parent="1"><mxGeometry x="338.5" y="66" width="105" height="20" as="geometry"/></mxCell><mxCell id="25" value="Mark Word" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;strokeColor=#BAC8D3;fillColor=#09555B;fontColor=#EEEEEE;" vertex="1" parent="1"><mxGeometry x="323.5" y="106" width="135" height="33" as="geometry"/></mxCell><mxCell id="26" value="Length 数组长度" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;strokeColor=#BAC8D3;fillColor=#09555B;fontColor=#EEEEEE;" vertex="1" parent="1"><mxGeometry x="323.5" y="172" width="135" height="33" as="geometry"/></mxCell><mxCell id="27" value="实例数据" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;strokeColor=#BAC8D3;fillColor=#09555B;fontColor=#EEEEEE;" vertex="1" parent="1"><mxGeometry x="323.5" y="205" width="135" height="50" as="geometry"/></mxCell><mxCell id="28" value="对齐填充" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;strokeColor=#BAC8D3;fillColor=#09555B;fontColor=#EEEEEE;" vertex="1" parent="1"><mxGeometry x="323.5" y="255" width="135" height="50" as="geometry"/></mxCell><mxCell id="29" value="" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.annotation_1;align=left;pointerEvents=1;rounded=0;sketch=0;fillColor=#09555B;fontColor=#EEEEEE;strokeColor=#BAC8D3;" vertex="1" parent="1"><mxGeometry x="316.5" y="126" width="7" height="70" as="geometry"/></mxCell><mxCell id="30" value="对象头" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;sketch=0;fontColor=#EEEEEE;" vertex="1" parent="1"><mxGeometry x="296.5" y="131" width="20" height="60" as="geometry"/></mxCell><mxCell id="31" value="Class Point 类型指针" style="rounded=0;whiteSpace=wrap;html=1;sketch=0;strokeColor=#BAC8D3;fillColor=#09555B;fontColor=#EEEEEE;" vertex="1" parent="1"><mxGeometry x="323.5" y="139" width="135" height="33" as="geometry"/></mxCell><mxCell id="33" value="&lt;h1&gt;64位虚拟机下验证&lt;/h1&gt;&lt;p&gt;int i = 5;（一共占16字节）&lt;/p&gt;&lt;p&gt;MarkWord 占64位，8字节&lt;/p&gt;&lt;p&gt;Class Point 占32位，4字节&lt;/p&gt;&lt;p&gt;实例数据 占32位，4字节&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;关闭指针压缩：&lt;/p&gt;&lt;p&gt;-XX:-UseCompressedOops -XX:-UseCompressedClassPointers&lt;br&gt;&lt;/p&gt;&lt;p&gt;int i = 5;（一共占24字节）&lt;/p&gt;&lt;p&gt;MarkWord 占64位，8字节&lt;/p&gt;&lt;p&gt;Class Point 占32位，8字节&lt;/p&gt;&lt;p&gt;实例数据 占32位，4字节&lt;/p&gt;&lt;p&gt;对齐填充 占4字节，因为前边累加不是8的倍数&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;总结：&lt;/p&gt;&lt;p&gt;就单单看这些基本变量（int、boolean），区别也是非常明显的，基本变量关闭指针压缩后，从16到24，多占二分之一的空间，所以感觉指针压缩还是很有道理的。&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;sketch=0;fontColor=#EEEEEE;" vertex="1" parent="1"><mxGeometry x="540" y="41" width="290" height="499" as="geometry"/></mxCell><mxCell id="34" value="&lt;h1&gt;查看默认指针压缩配置&lt;/h1&gt;&lt;p&gt;java -XX:+PrintCommandLineFlags&lt;br&gt;&lt;/p&gt;&lt;p&gt;会看到如下内容：&lt;/p&gt;&lt;p&gt;&amp;nbsp;-XX:+UseCompressedClassPointers -XX:+UseCompressedOops&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;sketch=0;fontColor=#EEEEEE;" vertex="1" parent="1"><mxGeometry x="83.5" y="400" width="365" height="130" as="geometry"/></mxCell></root></mxGraphModel></diagram></mxfile>